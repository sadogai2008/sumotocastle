<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æ´²æœ¬åŸ å…¬å¼ â€” çŸ³å£ç‰¹è¨­ & ã‚¤ãƒ³ãƒ•ã‚©ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</title>
  <meta name="description" content="æ´²æœ¬åŸ å…¬å¼ã‚µã‚¤ãƒˆï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰â€” çŸ³å£è§£èª¬ã€å¤©æ°—ã€ã‚¤ãƒ™ãƒ³ãƒˆã€ãƒã‚±ãƒƒãƒˆã€ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã€ä¿å­˜æƒ…å ±ã‚’æ²è¼‰ã€‚">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Noto+Sans+JP:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#050607; --panel:#0b0f12; --ink:#efeef0; --muted:#9aa0a6; --accent:#d6b35c; --glass: rgba(255,255,255,0.04); --container:1100px;
      --card-radius:12px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:"Noto Sans JP",system-ui, -apple-system,"Segoe UI",Roboto,Arial;background:var(--bg);color:var(--ink);-webkit-font-smoothing:antialiased}
    a{color:var(--accent)}
    header.site-header{position:fixed;inset-inline:0;top:0;z-index:120;background:linear-gradient(180deg,rgba(6,8,10,0.72),rgba(6,8,10,0.32));backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,0.04);}
    .header-inner{width:min(92%,var(--container));margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--ink)}
    .logo{width:42px;height:42px;border-radius:8px;background:linear-gradient(135deg,#bfa35a,#2f3b4f);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    nav.main-nav a{color:var(--muted);margin-left:14px;font-size:14px;text-decoration:none}
    nav.main-nav a:hover{color:var(--ink)}

    /* HERO */
    .hero{position:relative;height:78vh;min-height:520px;margin-top:64px;overflow:hidden}
    .hero-layer{position:absolute;inset:0;background-size:cover;background-position:center;filter:contrast(.9) brightness(.66);transition:opacity 1200ms ease,transform 12s linear;opacity:0;transform:scale(1.02);z-index:0}
    .hero-layer.active{opacity:1;transform:scale(1.05)}
    .hero-overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.36),rgba(0,0,0,0.72));z-index:6}
    .hero-inner{position:relative;z-index:10;width:min(92%,var(--container));margin:0 auto;padding:48px 0;display:flex;align-items:center;justify-content:space-between}
    .hero-copy h1{font-family:"Noto Serif JP",serif;font-size:44px;margin:0;color:var(--ink)}
    .hero-copy p{color:var(--muted);margin-top:8px}

    /* weather card */
    .hero-weather{
  position:absolute;
  top:20px;
  right:20px;
  z-index:20;
  width:260px;
  background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.06);
  padding:12px;
  border-radius:var(--card-radius);
  display:flex;

  flex-direction:column;   /* â† è¿½åŠ ï¼šç¸¦ã«ã™ã‚‹ */
  gap:10px;                /* â† å°‘ã—è©°ã‚ã‚‹ */

  backdrop-filter:blur(6px);
  box-shadow:0 14px 36px rgba(0,0,0,0.45)
}

    .hw-icon{
  width:auto;          /* â† å¤‰æ›´ */
  height:64px;
  font-size:40px;
  display:flex;
  align-items:center;
  justify-content:center
}

    .hw-temp{font-size:28px;font-weight:700}
    .hw-desc{color:var(--muted);font-size:13px;margin:6px 0 8px}
    .hw-row{display:flex;justify-content:space-between;font-size:13px;padding-top:6px;color:var(--muted);border-top:1px solid rgba(255,255,255,0.06);margin-top:6px}
    .hw-updated{font-size:12px;color:var(--muted);margin-top:6px}
    
    .weather-tabs{
  display:flex;
  gap:6px;
  margin-bottom:6px;
}

.wt-btn{
  font-size:11px;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
}

.wt-btn.active{
  background:var(--accent);
  color:#000;
  border-color:var(--accent);
}

    .hw-main{
  display:flex;
  flex-direction:column; /* â† ä¸Šä¸‹ */
  align-items:center;
  gap:2px;
}


    /* main content */
    main.content{background:var(--panel);padding:48px 0}
    .container{width:min(92%,var(--container));margin:0 auto}
    section{padding:32px 0;border-bottom:1px solid rgba(255,255,255,0.03)}
    h2{font-family:"Noto Serif JP";margin:0 0 12px;color:var(--ink)}
    p.lead{color:var(--muted);margin:0 0 12px}

    /* layout helpers */
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .two-col{display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.04)}
    .event-card{display:flex;flex-direction:column;gap:8px}
    .event-time{font-weight:700;color:var(--accent)}
    .btn{display:inline-block;padding:8px 12px;border-radius:999px;background:var(--accent);color:#071019;font-weight:700;text-decoration:none}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--ink)}

    /* gallery */
    .gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .gallery-grid img{width:100%;height:160px;object-fit:cover;border-radius:8px;cursor:pointer}
    .lb{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.9);z-index:300}
    .lb.active{display:flex}
    .lb img{max-width:92%;max-height:92%;border-radius:8px}

    /* annotated */
    .annot-wrap{position:relative;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
    .annot-wrap img{width:100%;height:auto;display:block}
    .hotspot{position:absolute;width:18px;height:18px;border-radius:50%;background:var(--accent);border:2px solid #111;transform:translate(-50%,-50%);cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.4)}

    /* model course list */
    .timeline{display:flex;flex-direction:column;gap:12px}
    .timeline .step{display:flex;gap:12px;align-items:flex-start}

    /* access map */
    .map-embed{width:100%;height:320px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);overflow:hidden}

    /* footer */
    footer.site-foot{padding:28px 0;text-align:center;color:var(--muted)}

    @media(max-width:980px){
      .grid-3{grid-template-columns:1fr 1fr}
      .two-col{grid-template-columns:1fr}
      .hero-inner{flex-direction:column;align-items:flex-start}
      .hero-weather{top:12px;right:12px;width:220px;padding:10px}
    }
    @media(max-width:640px){
      .grid-3{grid-template-columns:1fr}
      .gallery-grid img{height:120px}
    }
  </style>
</head>
<body>
  <header class="site-header" role="banner">
    <div class="header-inner">
      <a class="brand" href="#" aria-label="æ´²æœ¬åŸãƒˆãƒƒãƒ—ã¸">
        <span class="logo" aria-hidden="true">åŸ</span>
        <span style="font-weight:700;color:var(--ink)">æ´²æœ¬åŸ</span>
      </a>
      <nav class="main-nav" aria-label="ä¸»è¦ãƒŠãƒ“">
        <a href="#ishigaki">çŸ³å£</a>
        <a href="#events">ã‚¤ãƒ™ãƒ³ãƒˆ</a>
        <a href="#tickets">ãƒã‚±ãƒƒãƒˆ</a>
        <a href="#access">ã‚¢ã‚¯ã‚»ã‚¹</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" id="hero" aria-label="ãƒ’ãƒ¼ãƒ­ãƒ¼">
    <div class="hero-overlay" aria-hidden="true"></div>

    <!-- Hero layers injected by script -->
    <div class="hero-inner">
      <div class="hero-copy">
        <h1>æ´²æœ¬åŸ â€” çŸ³ã¨æ™‚é–“ã®æ™¯è‰²</h1>
        <p class="lead">çŸ³å£ã®é­…åŠ›ã‚’æ·±æ˜ã‚Šã™ã‚‹ç‰¹è¨­ã€‚ä¸‹ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆã€ä¿å­˜æƒ…å ±ã€ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
      </div>
    </div>

    <!-- Weather card (Open-Meteo, no API key) -->
    <div class="hero-weather" role="region" aria-label="æ´²æœ¬å¸‚ã®å¤©æ°—" aria-live="polite">
      <div class="weather-left">
        <div class="weather-tabs">
  <button class="wt-btn active" data-day="0">ä»Šæ—¥</button>
  <button class="wt-btn" data-day="1">æ˜æ—¥</button>
</div>

        <div id="hwIcon" class="hw-icon" aria-hidden="true">ï¼</div>
        <div class="hw-updated" id="hwUpdated">--</div>
      </div>
      <div class="weather-right">
        <div id="hwTemp" class="hw-temp">--Â°C</div>
        <div id="hwDesc" class="hw-desc">å¤©æ°—ã‚’èª­ã¿è¾¼ã¿ä¸­â€¦</div>
        <div class="hw-row"><span>æœ€é«˜</span><strong id="hwHigh">--Â°C</strong></div>
        <div class="hw-row"><span>æœ€ä½</span><strong id="hwLow">--Â°C</strong></div>
        <div class="hw-row"><span>é™æ°´</span><strong id="hwPop">--%</strong></div>
      </div>
    </div>
  </section>

  <!-- MAIN CONTENT -->
  <main class="content" id="main" role="main">
    <div class="container">

      <!-- EVENTS -->
      <section id="events" aria-labelledby="events-title">
        <h2 id="events-title">æœ¬æ—¥ã®ã‚¤ãƒ™ãƒ³ãƒˆ / Events</h2>
        <p class="lead">å½“æ—¥ãƒ»è¿‘æ—¥ã®ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã€‚è©³ç´°ã‚„ç”³è¾¼ã¯å„ã‚«ãƒ¼ãƒ‰ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
        <div id="eventsList" class="grid-3" aria-live="polite"></div>
      </section>

      <!-- NOTICES & TICKETS -->
      <section id="notices_tickets" class="two-col">
        <div>
          <h2 id="notices-title">ãŠçŸ¥ã‚‰ã› / Notices</h2>
          <div id="noticesList"></div>

          <h2 style="margin-top:20px;">è¦‹ã©ã“ã‚ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—</h2>
          <div id="highlights" class="grid-3" style="margin-top:12px;"></div>
        </div>

        <aside>
          <h2 id="tickets-title">é–‹é¤¨æƒ…å ±ãƒ»ãƒã‚±ãƒƒãƒˆ</h2>
          <div class="card" id="ticketCard">
            <p><strong>æ´²æœ¬åŸè·¡ï¼ˆä¸Šã®åŸï¼‰ã¯å…¬åœ’æ–½è¨­ã‹ã¤<br>å²è·¡ã¨ãªã£ã¦ãŠã‚Šï½¤å¸¸æ™‚ç„¡æ–™é–‹æ”¾ã—ã¦ã„ã¾ã™ã€‚</strong></p>
           
            <p class="lead">ãŸã ã—ã€å¤œé–“ç…§æ˜ãŒååˆ†ã«è¨­ç½®ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€æ—¥æ²¡å¾Œã¯æ‡ä¸­é›»ç¯ãªã©ã‚’æŒã£ã¦ãã‚‹ãªã©ã—ã¦è¶³å…ƒã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
            
            <div style="margin-top:12px"><a class="btn ghost" href="#info" id="downloadBrochure">ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a></div>
          </div>

          <h2 style="margin-top:18px;">ä¿å­˜ã¨å”åŠ›</h2>
          <div class="card">
            <p>çŸ³å£ã®ä¿å…¨æ´»å‹•ã«ã”å”åŠ›ãã ã•ã„ã€‚å¯„ä»˜ãƒ»ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ã‚’éšæ™‚å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚</p>
            <div style="margin-top:8px"><a class="btn" href="#donate">æ”¯æ´ã™ã‚‹</a></div>
          </div>
        </aside>
      </section>

      <!-- MODEL COURSES -->
      <section id="courses">
        <h2>æ¨å¥¨ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹ / Suggested Routes</h2>
        <div id="coursesList" class="timeline"></div>
      </section>

      <!-- ANNOTATED (hotspots) -->
      <section id="annotated">
        <h2>æ³¨é‡ˆå›³ / Annotated Diagram</h2>
        <p class="lead">å›³ä¸­ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€çŸ³ç©ã¿ã®æŠ€æ³•è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
        <div class="annot-wrap card" style="margin-top:12px;">
          <img id="annotImage" src="assets/ishigaki-annot-large.jpg" alt="æ´²æœ¬åŸã®çŸ³å£æ³¨é‡ˆå›³">
          <!-- hotspots will be injected -->
        </div>
      </section>

      <!-- GALLERY -->
      <section id="gallery">
        <h2>ã‚®ãƒ£ãƒ©ãƒªãƒ¼ / Photo Gallery</h2>
        <p class="lead">ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ‹¡å¤§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
        <div id="galleryGrid" class="gallery-grid" style="margin-top:12px;"></div>
      </section>

      <!-- ACCESS -->
      <section id="access">
        <h2>ã‚¢ã‚¯ã‚»ã‚¹ / Access</h2>
        <p class="lead">æ´²æœ¬åŸã®æ‰€åœ¨åœ°ã¨äº¤é€šæ‰‹æ®µã€é§è»Šå ´æƒ…å ±ã‚’æ²è¼‰ã—ã¦ã„ã¾ã™ã€‚</p>
        <div class="card" style="margin-top:12px;">
          <p><strong>ä½æ‰€</strong>ï¼šã€’656-xxxx å…µåº«çœŒæ´²æœ¬å¸‚</p>
          <p><strong>æœ€å¯„ã‚Š</strong>ï¼šæ´²æœ¬ãƒã‚¹ã‚»ãƒ³ã‚¿ãƒ¼ã‹ã‚‰ãƒã‚¹ã§ç´„10åˆ†</p>
          <div class="map-embed" style="margin-top:8px;">
            <!-- simple map link (static or embed) -->
            <iframe title="Map" src="https://www.google.com/maps?q=34.3439,134.8992&z=14&output=embed" style="width:100%;height:100%;border:0" loading="lazy"></iframe>
          </div>
        </div>
      </section>

      <!-- FAQ -->
      <section id="faq">
        <h2>ã‚ˆãã‚ã‚‹è³ªå• / FAQ</h2>
        <div id="faqList" style="margin-top:12px"></div>
      </section>

      <!-- CONSERVATION -->
      <section id="conservation">
        <h2>ä¿å­˜ã¨ãƒ¬ãƒãƒ¼ãƒˆ / Conservation</h2>
        <div class="card" style="margin-top:12px;">
          <p>æ´²æœ¬åŸã®çŸ³å£ã¯å®šæœŸçš„ãªè¨˜éŒ²ã¨è£œä¿®ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚æœ€è¿‘ã®ä¿®å¾©ãƒ¬ãƒãƒ¼ãƒˆã¯<a href="#reports">ã“ã¡ã‚‰</a>ã€‚</p>
        </div>
      </section>

    </div>
  </main>

  <div id="lightbox" class="lb" role="dialog" aria-hidden="true"><img id="lbImage" alt=""></div>

  <footer class="site-foot">
    <div style="padding:20px 0;color:var(--muted)">Â© 2026 æ´²æœ¬åŸ å…¬å¼ã‚µã‚¤ãƒˆ â€” é€£çµ¡: info@example.jp</div>
  </footer>

  <script>
  (function(){
    /* ===========================
       Inline data (sample)
       Replace with real JSON files or CMS in production
       =========================== */
    const DATA = {
      events: [
        { id:'e1', title:'éƒ·åœŸèŠ¸èƒ½ã®å®Ÿæ¼”', date:'2026-02-01', start:'13:00', end:'14:00', place:'æœ¬ä¸¸åºƒå ´', excerpt:'ä¼çµ±èŠ¸èƒ½ã®å®Ÿæ¼”ã€‚è¦³è¦§ç„¡æ–™ã€‚', image:'assets/events/performance.jpg', signup:'' },
        { id:'e2', title:'çŸ³å£ã‚¬ã‚¤ãƒ‰ãƒ„ã‚¢ãƒ¼', date:'2026-02-01', start:'15:00', end:'16:00', place:'å¤©å®ˆå°', excerpt:'å­¦èŠ¸å“¡ãŒçŸ³å£ã®è¦‹ã©ã“ã‚ã‚’ã”æ¡ˆå†…ï¼ˆè¦ç”³è¾¼ï¼‰ã€‚', image:'assets/events/tour.jpg', signup:'#'}
      ],
      notices: [
        { id:'n1', title:'è‡¨æ™‚ä¼‘é¤¨ã®ãŠçŸ¥ã‚‰ã›', date:'2026-03-05', excerpt:'å±•ç¤ºå…¥æ›¿ã®ãŸã‚ä¼‘é¤¨ã—ã¾ã™ã€‚', body:'å±•ç¤ºå…¥æ›¿ä½œæ¥­ã®ãŸã‚çµ‚æ—¥ä¼‘é¤¨ã—ã¾ã™ã€‚', pinned:true },
        { id:'n2', title:'å†¬å­£ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—', date:'2026-01-10', excerpt:'æœŸé–“é™å®šã§ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—ã‚’å®Ÿæ–½ä¸­ã€‚', body:'æ¯æ—¥ 17:30 ã€œ 20:00', pinned:false }
      ],
      highlights: [
        { id:'h1', title:'å¤©å®ˆå°è¥¿é¢', short:'å¤•æ™¯ãŒç¾ã—ã„ã‚¹ãƒãƒƒãƒˆ', image:'assets/highlight-west.jpg', anchor:'#ishigaki' },
        { id:'h2', title:'å¤§æ‰‹é–€ä»˜è¿‘', short:'åŠ å·¥ç—•ãŒè¦³å¯Ÿã§ãã‚‹', image:'assets/highlight-gate.jpg', anchor:'#ishigaki' },
        { id:'h3', title:'çŸ³åˆ‡å ´è·¡', short:'çŸ³æã®ç”£åœ°ã‚’å­¦ã¹ã‚‹', image:'assets/highlight-quarry.jpg', anchor:'#ishigaki' }
      ],
      courses: [
        { id:'c1', title:'åŠæ—¥ã‚³ãƒ¼ã‚¹ï¼ˆç´„3æ™‚é–“ï¼‰', duration:'ç´„3æ™‚é–“', steps:[
          { time:'09:00', place:'å¤§æ‰‹é–€', desc:'å…¥å ´ãƒ»é–€å‘¨è¾ºã®è§£èª¬' },
          { time:'10:00', place:'å¤©å®ˆå°', desc:'çŸ³å£ã¨çœºæœ›ã‚’è¦³å¯Ÿ' },
          { time:'11:00', place:'æœ¬ä¸¸åºƒå ´', desc:'éƒ·åœŸæ–™ç†ã®è»½é£Ÿ' }
        ]}
      ],
      annotated: {
        image:'assets/ishigaki-annot-large.jpg',
        hotspots:[
          { id:'hs1', x:26, y:42, title:'é‡é¢ç©', desc:'è‡ªç„¶çŸ³ã‚’æ´»ã‹ã—ã¦ç©ã‚€æŠ€æ³•ã€‚' },
          { id:'hs2', x:55, y:36, title:'æ‰“è¾¼ã¿æ¥', desc:'çŸ³ã‚’æ•´ãˆã¦ç·»å¯†ã«çµ„ã‚€æ‰‹æ³•ã€‚' },
          { id:'hs3', x:72, y:62, title:'å¸ƒç©', desc:'æ°´å¹³ã«æƒãˆã¦æ•´ç„¶ã¨ç©ã‚€æ§˜å¼ã€‚' }
        ]
      },
      gallery: [
        { id:'g1', thumb:'assets/ishigaki-1.jpg', large:'assets/ishigaki-1-large.jpg', alt:'å¤©å®ˆå°ã®çŸ³å£ï¼ˆå¤•æ™¯ï¼‰', caption:'å¤©å®ˆå°ã‹ã‚‰ã®å¤•æ™¯', category:'sunset' },
        { id:'g2', thumb:'assets/ishigaki-2.jpg', large:'assets/ishigaki-2-large.jpg', alt:'å¤§æ‰‹é–€ä»˜è¿‘', caption:'å¤§æ‰‹é–€ã®çŸ³ç©ã¿', category:'stone' },
        { id:'g3', thumb:'assets/ishigaki-3.jpg', large:'assets/ishigaki-3-large.jpg', alt:'åŠ å·¥è·¡', caption:'åŠ å·¥ç—•ãŒæ®‹ã‚‹çŸ³', category:'detail' }
      ],
      faq: [
        { q:'é§è»Šå ´ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', a:'æœ¬ä¸¸è¿‘ãã«ç„¡æ–™/æœ‰æ–™é§è»Šå ´ãŒã‚ã‚Šã¾ã™ã€‚æ··é›‘æ™‚ã¯å…¬å…±äº¤é€šæ©Ÿé–¢ã®ã”åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚' },
        { q:'ãƒšãƒƒãƒˆã¯å…¥ã‚Œã¾ã™ã‹ï¼Ÿ', a:'ãƒªãƒ¼ãƒ‰ç€ç”¨ã§å…¥å ´ã§ãã¾ã™ãŒã€å±•ç¤ºå®¤å†…ã¯ä¸å¯ã§ã™ã€‚' }
      ]
    };

    /* ===========================
       Hero layers (simple single image used; can add slider)
       =========================== */
    const HERO_IMAGES = ['assets/hero-1.jpg']; // add more if needed
    function initHero(){
      const hero = document.getElementById('hero');
      HERO_IMAGES.forEach((src,i)=> {
        const d = document.createElement('div');
        d.className = 'hero-layer' + (i===0 ? ' active' : '');
        d.style.backgroundImage = `url('${src}')`;
        hero.insertBefore(d, hero.firstChild);
      });
    }

    /* ===========================
       WEATHER (Open-Meteo, no API key)
       - caching in localStorage to reduce requests
       =========================== */
    const LAT = 34.3439, LON = 134.8992;
    const CACHE_KEY = 'sumoto_openmeteo_v1';
    const CACHE_TTL = 10 * 60 * 1000; // 10min

    const elIcon = document.getElementById('hwIcon');
    const elTemp = document.getElementById('hwTemp');
    const elDesc = document.getElementById('hwDesc');
    const elHigh = document.getElementById('hwHigh');
    const elLow  = document.getElementById('hwLow');
    const elPop  = document.getElementById('hwPop');
    const elUpdated = document.getElementById('hwUpdated');

    const safe = (fn, fallback=null) => { try{ const v = fn(); return (v===undefined||v===null) ? fallback : v; }catch(e){ return fallback; } };

    function weatherIcon(code){
      code = Number(code);
      if (code === 0) return 'â˜€ï¸';
      if (code === 1 || code === 2) return 'â›…';
      if (code === 3) return 'â˜ï¸';
      if (code === 45 || code === 48) return 'ğŸŒ«ï¸';
      if ([51,53,55,56,57].includes(code)) return 'ğŸŒ¦ï¸';
      if ([61,63,65,80,81,82].includes(code)) return 'ğŸŒ§ï¸';
      if ([71,73,75,77,85,86].includes(code)) return 'â„ï¸';
      if ([95,96,99].includes(code)) return 'â›ˆï¸';
      return 'ï¼';
    }
    function castleComment(max,pop){
      if(pop >= 60) return 'é›¨ã®å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚è¶³å…ƒã«ã”æ³¨æ„ãã ã•ã„ã€‚';
      if(max <= 5) return 'å†·ãˆè¾¼ã¿ãŒå³ã—ã„ã§ã™ã€‚é˜²å¯’ã‚’ã€‚';
      if(max <= 10) return 'ã‚„ã‚„å¯’ã„ã§ã™ã€‚ä¸Šç€ãŒã‚ã‚‹ã¨å®‰å¿ƒã§ã™ã€‚';
      if(max <= 15) return 'ã²ã‚“ã‚„ã‚Šã¨ã—ã¦ã„ã¾ã™ã€‚æ•£ç­–ã«è‰¯ã„æ°—å€™ã§ã™ã€‚';
      if(max <= 22) return 'ç©ã‚„ã‹ãªé™½æ°—ã€‚æ•£ç­–ã«ãŠã™ã™ã‚ã§ã™ã€‚';
      return 'æš‘ã•å¯¾ç­–ã‚’å¿˜ã‚Œãšã«ã€‚';
    }

    function readCache(){ try{ const raw = localStorage.getItem(CACHE_KEY); if(!raw) return null; const p = JSON.parse(raw); if(Date.now() - p.ts > CACHE_TTL) return null; return p.data; }catch(e){return null;} }
    function writeCache(d){ try{ localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data: d })); }catch(e){} }

    async function fetchWeather(){
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${encodeURIComponent(LAT)}&longitude=${encodeURIComponent(LON)}` +
                  `&current_weather=true&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max&timezone=Asia%2FTokyo`;
      const res = await fetch(url, { cache: 'no-cache' });
      if(!res.ok) throw new Error('fetch failed: '+res.status);
      return res.json();
    }

    async function initWeather(){
      const cached = readCache();
      if(cached){
        renderWeather(cached,0);
        elUpdated.textContent = 'æœ€çµ‚æ›´æ–°ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰: ' + new Date().toLocaleTimeString();
      }
      try{
        const data = await fetchWeather();
        writeCache(data);
        renderWeather(data,0);
        elUpdated.textContent = 'æœ€çµ‚æ›´æ–°: ' + new Date().toLocaleTimeString();
        window.__weatherData = data; // keep for other UI
      }catch(err){
        console.warn(err);
        if(!cached){
          elDesc.textContent = 'å¤©æ°—æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“';
          elTemp.textContent = '--Â°C';
          elHigh.textContent = '--Â°C';
          elLow.textContent = '--Â°C';
          elPop.textContent = '--%';
          elIcon.textContent = 'ï¼';
          elUpdated.textContent = '--';
        }
      }
    }

    function renderWeather(data, day){
      const current = data.current_weather;
      const daily = data.daily || {};
      const maxArr = daily.temperature_2m_max || [];
      const minArr = daily.temperature_2m_min || [];
      const popArr = daily.precipitation_probability_max || [];
      const codeArr = daily.weathercode || [];

      const max = safe(()=> maxArr[day], null);
      const min = safe(()=> minArr[day], null);
      const pop = safe(()=> popArr[day], null);
      const code = safe(()=> codeArr[day], null);

      const displayTemp = (day===0 && current && typeof current.temperature==='number') ? Math.round(current.temperature)+'Â°C' : (max!==null?Math.round(max)+'Â°C':'--Â°C');

      elTemp.textContent = displayTemp;
      elHigh.textContent = (max!==null?Math.round(max)+'Â°C':'--Â°C');
      elLow.textContent  = (min!==null?Math.round(min)+'Â°C':'--Â°C');
      elPop.textContent  = (pop!==null?pop+'%':'--%');
      elIcon.textContent = weatherIcon(code!==null?code:(current && current.weathercode?current.weathercode:null));
      elDesc.textContent = castleComment(max!==null?Number(max):(current?Number(current.temperature):0), pop!==null?Number(pop):0);
    }

    /* ===========================
       Render Events / Notices / Highlights / Courses / Gallery / Annotated / FAQ
       Use DATA above as source
       =========================== */

    function renderEvents(){
      const list = document.getElementById('eventsList');
      list.innerHTML = '';
      DATA.events.forEach(ev => {
        const card = document.createElement('div'); card.className = 'card event-card';
        card.innerHTML = `
          <div style="min-height:86px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:8px; border-radius:8px;">
            <div class="event-time">${ev.date} ${ev.start}ã€œ</div>
            <div style="font-weight:700;margin-top:6px">${ev.title}</div>
            <div style="color:var(--muted);margin-top:6px">${ev.place} â€” ${ev.excerpt}</div>
          </div>
          <div style="margin-top:8px;display:flex;gap:8px;justify-content:flex-end">
            ${ev.signup ? `<a class="btn" href="${ev.signup}" target="_blank" rel="noopener">ç”³è¾¼</a>` : ''}
            <a class="btn ghost" href="#${ev.id}">è©³ç´°</a>
          </div>
        `;
        list.appendChild(card);
      });
    }

    function renderNotices(){
      const el = document.getElementById('noticesList');
      el.innerHTML = '';
      DATA.notices.forEach(n => {
        const d = document.createElement('div'); d.className = 'card'; d.style.marginBottom = '10px';
        d.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><div>
          <strong>${n.title}</strong><div style="color:var(--muted);font-size:13px">${n.date}</div>
        </div><div>${n.pinned?'<span style="background:var(--accent);color:#000;padding:6px;border-radius:8px;font-weight:700;font-size:12px">é‡è¦</span>':''}</div></div>
        <p style="margin-top:10px;color:var(--muted)">${n.excerpt}</p>`;
        el.appendChild(d);
      });
    }

    function renderHighlights(){
      const el = document.getElementById('highlights');
      el.innerHTML = '';
      DATA.highlights.forEach(h=>{
        const c = document.createElement('div'); c.className = 'card';
        c.innerHTML = `<div style="height:120px;background-image:url('${h.image}');background-size:cover;background-position:center;border-radius:8px"></div>
          <div style="margin-top:8px;font-weight:700">${h.title}</div>
          <div style="color:var(--muted);font-size:13px;margin-top:6px">${h.short}</div>
          <div style="margin-top:10px;text-align:right"><a class="btn ghost" href="${h.anchor}">è©³ã—ã</a></div>`;
        el.appendChild(c);
      });
    }

    function renderCourses(){
      const el = document.getElementById('coursesList');
      el.innerHTML = '';
      DATA.courses.forEach(c=>{
        const wrap = document.createElement('div'); wrap.className='card';
        wrap.innerHTML = `<div style="font-weight:700">${c.title} <span style="color:var(--muted);font-weight:500">(${c.duration})</span></div>`;
        const steps = document.createElement('div'); steps.style.marginTop='8px';
        c.steps.forEach(s=>{
          const step = document.createElement('div'); step.className='step';
          step.innerHTML = `<div style="width:72px;color:var(--accent);font-weight:700">${s.time}</div><div><div style="font-weight:700">${s.place}</div><div style="color:var(--muted);font-size:13px">${s.desc}</div></div>`;
          steps.appendChild(step);
        });
        wrap.appendChild(steps);
        el.appendChild(wrap);
      });
    }

    /* Annotated (hotspots) */
    function renderAnnotated(){
      const wrap = document.querySelector('.annot-wrap');
      wrap.querySelectorAll('.hotspot').forEach(n=>n.remove());
      const img = document.getElementById('annotImage');
      img.addEventListener('load', ()=> {
        const rect = img.getBoundingClientRect();
        // create hotspots relative to image element
        DATA.annotated.hotspots.forEach(h=>{
          const btn = document.createElement('button');
          btn.className = 'hotspot';
          btn.style.left = h.x + '%';
          btn.style.top = h.y + '%';
          btn.setAttribute('aria-label', h.title);
          btn.addEventListener('click', (e)=>{
            e.stopPropagation();
            showHotspotTooltip(h, btn);
          });
          wrap.appendChild(btn);
        });
      });
    }

    function showHotspotTooltip(h, btnEl){
      // remove existing
      const prev = document.getElementById('hs-tip');
      if(prev) prev.remove();
      const tip = document.createElement('div'); tip.id='hs-tip';
      tip.style.position='absolute'; tip.style.zIndex=500; tip.style.background='#fff'; tip.style.color='#111'; tip.style.padding='10px'; tip.style.borderRadius='8px'; tip.style.maxWidth='260px'; tip.style.boxShadow='0 12px 36px rgba(0,0,0,0.2)'; tip.innerHTML = `<strong>${h.title}</strong><div style="margin-top:6px;font-size:13px;color:#333">${h.desc}</div>`;
      document.body.appendChild(tip);
      const r = btnEl.getBoundingClientRect();
      tip.style.left = (r.left + window.scrollX + 12) + 'px';
      tip.style.top = (r.top + window.scrollY - 8) + 'px';
      // remove on click elsewhere
      setTimeout(()=> {
        document.addEventListener('click', function cl(){
          tip.remove(); document.removeEventListener('click', cl);
        }, { once: true });
      }, 10);
    }

    /* Gallery & Lightbox */
    function renderGallery(){
      const grid = document.getElementById('galleryGrid');
      grid.innerHTML = '';
      DATA.gallery.forEach(img=>{
        const el = document.createElement('img'); el.src = img.thumb; el.alt = img.alt; el.loading='lazy';
        el.addEventListener('click', ()=> openLightbox(img));
        grid.appendChild(el);
      });
    }
    function openLightbox(img){
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lbImage');
      lbImg.src = img.large || img.thumb;
      lbImg.alt = img.alt || '';
      lb.classList.add('active'); lb.setAttribute('aria-hidden','false');
    }
    document.getElementById('lightbox').addEventListener('click', e=>{
      if(e.target === e.currentTarget || e.target.id === 'lbImage'){
        e.currentTarget.classList.remove('active'); e.currentTarget.setAttribute('aria-hidden','true'); document.getElementById('lbImage').src='';
      }
    });
    document.addEventListener('keydown', e=> { if(e.key==='Escape' && document.getElementById('lightbox').classList.contains('active')){ document.getElementById('lightbox').classList.remove('active'); document.getElementById('lbImage').src=''; } });

    /* FAQ */
    function renderFAQ(){
      const el = document.getElementById('faqList');
      el.innerHTML = '';
      DATA.faq.forEach((q,i)=>{
        const d = document.createElement('details'); d.className='card'; d.style.marginBottom='10px';
        d.innerHTML = `<summary style="font-weight:700;cursor:pointer">${q.q}</summary><div style="margin-top:8px;color:var(--muted)">${q.a}</div>`;
        el.appendChild(d);
      });
    }

    
    /* ===========================
       Init on load
       =========================== */
    function initAll(){
      initHero();
      renderEvents();
      renderNotices();
      renderHighlights();
      renderCourses();
      renderAnnotated();
      renderGallery();
      renderFAQ();
      initWeather();
      setupTabs();
    }

    /* Tabs for weather (today/tomorrow) */
    function setupTabs(){
      const tabs = document.querySelectorAll('.hero-weather [data-day]');
      tabs.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const idx = Number(btn.dataset.day);
          const w = window.__weatherData || readCache();
          if(w) renderWeather(w, idx);
          tabs.forEach(t=>t.classList.remove('active'));
          btn.classList.add('active');
        });
        btn.addEventListener('keydown', (e)=> {
          if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); }
        });
      });
    }
    


    // Run
    initAll();

    // expose DATA for debugging
    window.__SITE_DATA = DATA;

  })();
  </script>
</body>
</html>
